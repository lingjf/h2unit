CMAKE_MINIMUM_REQUIRED(VERSION 3.0)

PROJECT(h2_unit)

SET(CMAKE_BUILD_TYPE Debug)
SET(CMAKE_CXX_STANDARD 11)

ADD_CUSTOM_TARGET(release ALL
    COMMAND  python ${CMAKE_CURRENT_SOURCE_DIR}/../build/concat.py
)

AUX_SOURCE_DIRECTORY(. SRC_TEST)

ADD_EXECUTABLE(a.out ${SRC_TEST})

IF(CMAKE_SYSTEM_NAME MATCHES "Darwin")
    ADD_CUSTOM_TARGET(fixup ALL
        COMMAND  ${CMAKE_CURRENT_SOURCE_DIR}/../fixup.sh a.out
        DEPENDS a.out
    )
ENDIF()
